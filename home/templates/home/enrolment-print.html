{% extends 'base.html' %}

{% block title %}Enrolment Application | DMASL{% endblock %}

{% block style %}
{% load static %}
{% load humanize %}

    <link rel="stylesheet" type="text/css" href="{% static 'home/style/pdf_css.css' %}">
{% endblock %}

{% block current_page %}Benefits Confirmation{% endblock %}

{% block body %}
    <div class="col l12 white" style="padding: 20px;">
        <h4 class="col s12 m12 l12 center-align enrl-txt" style="margin-top: 20px; padding: 0px;">Annual Benefits Enrolment</h4>

        <p class="col s12 m12 l12 divider" style="margin-top: 30px;"></p>

        <div class="col l12" style="border: 2px solid #333; margin-bottom: 20px; margin-top: 40px; padding: 20px;">

            <div class="col s12 m12 l12" style="padding: 0px;">
                <p class="col s4 m4 l4"></p>
                <p class="col s4 m4 l4 center-align">
                    {% if request.user.last_name %}
                        {{ request.user.last_name | title }},
                    {% endif %}

                    {% if request.user.first_name %}
                        {{ request.user.first_name | title }}
                    {% endif %}

                    {% if request.user.middle_name %}
                        {{ request.user.middle_name | title }}
                    {% endif %}
                </p>
                <p class="col s4 m4 l4 right-align">{{ request.user.org.enrolment_period }}</p>
            </div>

            <div class="col s12 m12 l12" style="padding: 0px; margin-top: 10px;">
                <p class="col s4 m4 l4"></p>
                <p class="col s4 m4 l4 center-align" style="font-size: 20px;"><b>Benefits Confirmation</b></p>
                <p class="col s4 m4 l4"></p>
            </div>


            <div class="col s12 m12 l12" style="padding: 0px; margin-top: 20px;">
                <p>
                  <span>{{ org.text_block_2 }}</span>
                </p>
            </div>

            <div class="col s12 m12 l12" style="padding: 0px; margin-top: 30px;">
                <p style="font-size: 20px; font-weight: bold;">MEMBER DETAILS</p>
            </div>


            <div class="col s12 m12 l12" style="padding: 0px; margin-top: 20px;">
                <p class="col s4 m4 l4" style="padding: 0px;"><b>Contract Number</b></p>
                <p class="col s4 m4 l4">{{ request.user.org.policy_num }}</p>
                <p class="col s4 m4 l4"></p>
            </div>

            <div class="col s12 m12 l12" style="padding: 0px; margin-top: 5px;">
                <p class="col s4 m4 l4" style="padding: 0px;"><b>Contract Holder Name</b></p>
                <p class="col s4 m4 l4">{{ request.user.org.contract_holder }}</p>
                <p class="col s4 m4 l4"></p>
            </div>

            <div class="col s12 m12 l12" style="padding: 0px; margin-top: 5px;">
                <p class="col s4 m4 l4" style="padding: 0px;"><b>Class</b></p>
                <p class="col s4 m4 l4">{{ request.user.org.class_type }}</p>
                <p class="col s4 m4 l4"></p>
            </div>


            <div class="col s12 m12 l12" style="padding: 0px; margin-top: 20px;">
                <p class="col s4 m4 l4" style="padding: 0px;"><b>Member Name</b></p>
                <p class="col s4 m4 l4">
                    {% if request.user.last_name %}
                        {{ request.user.last_name | title }},
                    {% endif %}

                    {% if request.user.first_name %}
                        {{ request.user.first_name | title }}
                    {% endif %}

                    {% if request.user.middle_name %}
                        {{ request.user.middle_name | title }}
                    {% endif %}
                </p>
                <p class="col s4 m4 l4"></p>
            </div>


            <div class="col s12 m12 l12" style="padding: 0px; margin-top: 5px;">
                <p class="col s4 m4 l4" style="padding: 0px;"><b>ID Number</b></p>
                <p class="col s4 m4 l4">{{ request.user.username }}</p>
                <p class="col s4 m4 l4"></p>
            </div>


            <!-- <div class="col s12 m12 l12" style="padding: 0px; margin-top: 30px;">
                <p style="font-size: 20px; font-weight: bold;">INFORMATION SUMMARY</p>
            </div>
            {% if org.salary_adjustment %}
            <div class="col s12 m12 l12" style="padding: 0px; margin-top: 20px;">
                <p class="col s4 m4 l4" style="padding: 0px;">Job Rate</p>
                <p class="col s4 m4 l4">${{ request.user.salary_base |floatformat:2|intcomma  }}</p>
                <p class="col s4 m4 l4"></p>
            </div>
            <div class="col s12 m12 l12" style="padding: 0px; margin-top: 5px;">
                <p class="col s4 m4 l4" style="padding: 0px;">Taxable Earnings</p>
                <p class="col s4 m4 l4">${{ request.user.salary_adjusted |floatformat:2|intcomma }}</p>
                <p class="col s4 m4 l4"></p>
            </div>
            {% endif %}

            <div class="col s12 m12 l12" style="padding: 0px; margin-top: 5px;">
                <p class="col s4 m4 l4" style="padding: 0px;">Total Benefit Credits</p>
                <p class="col s4 m4 l4">${{ request.user.hsa_annual_credits |floatformat:2|intcomma }}</p>
                <p class="col s4 m4 l4"></p>
            </div>

            <div class="col s12 m12 l12" style="padding: 0px; margin-top: 5px;">
                <p class="col s4 m4 l4" style="padding: 0px;">HSA Selection</p>
                <p class="col s4 m4 l4">${{ request.user.hsa_optional |floatformat:2|intcomma }}</p>
                <p class="col s4 m4 l4"></p>
            </div>

            <div class="col s12 m12 l12" style="padding: 0px; margin-top: 5px;">
                <p class="col s4 m4 l4" style="padding: 0px;">Benefit Credits Remaining</p>
                <p class="col s4 m4 l4">${{ request.user.hsa_remaining |floatformat:2|intcomma}}</p>
                <p class="col s4 m4 l4"></p>
            </div> -->


            {% if request.user.opt_out_bool %}

            <div class="col s12 m12 l12" style="padding: 0px; margin-top: 5px;">

              <p class="col s4 m4 l4" style="padding: 0px;">Benefit Credits Opted Out</p>
              <p class="col s4 m4 l4">{{ request.user.opt_out_bool |yesno:"Yes,No"}}</p>
              <p class="col s4 m4 l4"></p>

            {% endif %}



            <div class="col s12 m12 l12" style="padding: 0px; margin-top: 30px;">
                <p style="font-size: 20px; font-weight: bold;">BENEFITS SUMMARY</p>
            </div>

            <div class="col s12 m12 l12" style="padding: 0px; margin-top: 20px;">
                <p class="col s4 m4 l4" style="padding: 0px;">Health Spending Account</p>
                <p class="col s4 m4 l4">${{ request.user.hsa_optional |floatformat:2|intcomma }}</p>
                <p class="col s4 m4 l4"></p>
            </div>

            <p class="col s12 m12 l12 divider grey" style="margin-top: 10px;"></p>


            <form method="post">
                {% csrf_token %}

                <div class="input-field col s12 m12 l12 additional_info" style="margin-top: 50px;">
                    {{ form.additional_info }}
                    <label for="id_additional_info">Additional information / Comments</label>
                </div>

                <div class="col s12 m12 l12 add_info_display" style="padding: 0px; margin-top: 20px;">
                    <p style="font-size: 20px; font-weight: bold;">Additional Information / Comments</p>

                    <div class="col s12 m12 l12" style="margin-top: 10px; padding: 0px;">
                        {% if request.user.additional_info %}
                            {{ request.user.additional_info | safe }}
                        {% else %}
                            None
                        {% endif %}
                    </div>
                </div>

                <div class="col s12 m12 l12" style="padding: 0px; margin-top: 20px;">
                    <p style="font-weight: bold;">
                      <span>{{ org.text_block_3 }}</span>
                    </p>
                </div>


                <div class="col s12 m12 l12" style="padding: 0px; margin-top: 50px;">
                    <div class="col s6 m6 l6" style="padding: 0px;">
                        <p class="left" style="width: 150px; font-weight: bold;">Employee Signature: </p>
                        <p class="left" style="width: 200px; height: 20px; border-bottom: 2px solid #333;"></p>
                    </div>

                    <div class="col s6 m6 l6 right-align" style="padding: 0px;">
                        <p class="right" style="width: 200px; height: 20px; border-bottom: 2px solid #333;"> </p>
                        <p class="right" style="width: 140px; font-weight: bold;">Date: </p>
                    </div>
                </div>

                <div class="col s12 m12 l12" style="padding: 0px; margin-top: 5px;">
                    <p style="font-weight: bold;">
                        {% if request.user.last_name %}
                            {{ request.user.last_name | title }},
                        {% endif %}

                        {% if request.user.first_name %}
                            {{ request.user.first_name | title }}
                        {% endif %}

                        {% if request.user.middle_name %}
                            {{ request.user.middle_name | title }}
                        {% endif %}
                    </p>
                </div>


                <div class="col s12 m12 l12 p_btn" style="margin-bottom: 20px; margin-top: 50px; padding: 0px;">
                    <button id="print" class="btn waves-effect waves-light" type="submit" style="background-color: #002d62;">Print
                    </button>

                    <a style="background-color: #002d62; float: right;" href="{% url 'home:logout' %}?from=client&org={{ org.org_short_name }}" class="btn waves-effect waves-light" style="background-color: #002d62;">Logout
                    </a>
                </div>
            </form>
        </div>

    </div>
{% endblock %}


{% block script %}
<script>


    var getUrlParameter = function getUrlParameter(sParam) {
        var sPageURL = decodeURIComponent(window.location.search.substring(1)),
            sURLVariables = sPageURL.split('&'),
            sParameterName,
            i;

        for (i = 0; i < sURLVariables.length; i++) {
            sParameterName = sURLVariables[i].split('=');

            if (sParameterName[0] === sParam) {
                return sParameterName[1] === undefined ? true : sParameterName[1];
            }
        }
    };


    $("document").ready(function(){

        var print = getUrlParameter('print');

        if (print == 'yes')
        {
            console.log("sdljnsjkns");
            window.print();
        }else{
            console.log("sjdnsk");
        }
    });
</script>
{% endblock %}
